// Exportar Swiper para uso global
import Swiper from 'swiper';
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';

// Inicialización de Swiper para carruseles
export function initSwipers() {
  const swipers = [];
  const swiperContainers = document.querySelectorAll('.swiper-container');
  
  swiperContainers.forEach((container, index) => {
    const options = {
      // Configuración básica
      loop: true,
      speed: 800,
      spaceBetween: 30,
      grabCursor: true,
      
      // Navegación
      navigation: container.querySelector('.swiper-button-next') && container.querySelector('.swiper-button-prev') ? {
        nextEl: container.querySelector('.swiper-button-next'),
        prevEl: container.querySelector('.swiper-button-prev'),
      } : false,
      
      // Paginación
      pagination: container.querySelector('.swiper-pagination') ? {
        el: container.querySelector('.swiper-pagination'),
        clickable: true,
        type: 'bullets',
      } : false,
      
      // Configuración responsive
      breakpoints: {
        320: {
          slidesPerView: 1,
          spaceBetween: 10
        },
        576: {
          slidesPerView: 2,
          spaceBetween: 15
        },
        992: {
          slidesPerView: 3,
          spaceBetween: 20
        },
        1200: {
          slidesPerView: 4,
          spaceBetween: 30
        }
      },
      
      // Autoplay
      autoplay: container.hasAttribute('data-autoplay') ? {
        delay: parseInt(container.getAttribute('data-autoplay-delay') || '3000', 10),
        disableOnInteraction: false,
        pauseOnMouseEnter: true
      } : false
    };
    
    // Inicializar Swiper
    swipers[index] = new Swiper(container, options);
  });
  
  return swipers;
}

// Inicializar Swipers cuando el DOM esté listo
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initSwipers);
} else {
  initSwipers();
}

export default Swiper;